<script type="text/javascript">
  var gk_isXlsx = false;
  var gk_xlsxFileLookup = {};
  var gk_fileData = {};
  function filledCell(cell) {
    return cell !== '' && cell != null;
  }
  function loadFileData(filename) {
  if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
      try {
          var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
          var firstSheetName = workbook.SheetNames[0];
          var worksheet = workbook.Sheets[firstSheetName];

          // Convert sheet to JSON to filter blank rows
          var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
          // Filter out blank rows (rows where all cells are empty, null, or undefined)
          var filteredData = jsonData.filter(row => row.some(filledCell));

          // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
          var headerRowIndex = filteredData.findIndex((row, index) =>
            row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
          );
          // Fallback
          if (headerRowIndex === -1 || headerRowIndex > 25) {
            headerRowIndex = 0;
          }

          // Convert filtered JSON back to CSV
          var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
          csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
          return csv;
      } catch (e) {
          console.error(e);
          return "";
      }
  }
  return gk_fileData[filename] || "";
  }
  </script><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout.com-Inspired Card Payment</title>
<style>
  * {
      box-sizing: border-box;
  }
  body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f6f5;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      color: #1a1a1a;
  }
  .checkout-container {
      background: #ffffff;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      width: 100%;
      max-width: 420px;
  }
  .amount-card {
      background: #fafafa;
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 24px;
      border: 1px solid #d9d9d9;
  }
  .amount-group {
      display: flex;
      gap: 16px;
  }
  .amount-group .form-group {
      flex: 1;
  }
  .amount-group .currency-select {
      flex: 0 0 120px;
  }
  .header {
      display: flex;
      align-items: center;
      margin-bottom: 24px;
  }
  .header h2 {
      font-size: 20px;
      font-weight: 600;
      margin: 0;
      flex-grow: 1;
      color: #1a1a1a;
  }
  .header img {
      width: 32px;
      height: 32px;
  }
  .form-group {
      margin-bottom: 20px;
      position: relative;
  }
  label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #333;
      margin-bottom: 8px;
  }
  input, select {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      border: 1px solid #d9d9d9;
      border-radius: 8px;
      background: #fafafa;
      transition: border-color 0.2s, box-shadow 0.2s;
  }
  input:focus, select:focus {
      outline: none;
      border-color: #0066ff;
      box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
  }
  .card-number-container {
      position: relative;
  }
  .card-icons {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      gap: 8px;
  }
  .card-icons img {
      width: 28px;
      height: 20px;
      opacity: 0.3;
      transition: opacity 0.2s;
  }
  .card-icons img.active {
      opacity: 1;
  }
  .flex-group {
      display: flex;
      gap: 16px;
  }
  .flex-group .form-group {
      flex: 1;
  }
  .error {
      color: #ff3333;
      font-size: 12px;
      margin-top: 6px;
      display: none;
  }
  button {
      width: 100%;
      padding: 14px;
      background: #0066ff;
      border: none;
      border-radius: 8px;
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
  }
  button:hover {
      background: #0052cc;
  }
  button:active {
      transform: scale(0.98);
  }
  button:disabled {
      background: #cccccc;
      cursor: not-allowed;
  }
  @media (max-width: 480px) {
      .checkout-container {
          margin: 16px;
          padding: 16px;
      }
      .flex-group, .amount-group {
          flex-direction: column;
          gap: 20px;
      }
      .amount-group .currency-select {
          flex: 1;
      }
  }
</style>
</head>
<body>
<div class="checkout-container">
  <div class="amount-card">
      <div class="amount-group">
          <div class="form-group">
              <label for="amount">Amount</label>
              <input type="text" id="amount" placeholder="Enter amount (e.g., 99.00)">
              <div id="amount-error" class="error">Enter a valid amount</div>
          </div>
          <div class="form-group currency-select">
              <label for="currency">Currency</label>
              <select id="currency">
                  <option value="">Select</option>
                  <option value="USD">$ USD</option>
                  <option value="EUR">€ EUR</option>
                  <option value="GBP">£ GBP</option>
              </select>
              <div id="currency-error" class="error">Select a currency</div>
          </div>
      </div>
  </div>
  <div class="header">
      <h2>Secure Card Payment</h2>
      <img src="https://via.placeholder.com/32" alt="Lock Icon">
  </div>
  <div class="form-group">
      <label for="card-number">Card Number</label>
      <div class="card-number-container">
          <input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19">
          <div class="card-icons">
              <img id="visa-icon" src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa">
              <img id="mastercard-icon" src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" alt="Mastercard">
              <img id="amex-icon" src="https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo.svg" alt="Amex">
          </div>
      </div>
      <div id="card-number-error" class="error">Enter a valid card number</div>
  </div>
  <div class="flex-group">
      <div class="form-group">
          <label for="expiry">Expiry Date</label>
          <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
          <div id="expiry-error" class="error">Enter a valid expiry date</div>
      </div>
      <div class="form-group">
          <label for="cvv">CVV</label>
          <input type="text" id="cvv" placeholder="123" maxlength="4">
          <div id="cvv-error" class="error">Enter a valid CVV</div>
      </div>
  </div>
  <button id="pay-button" disabled>Pay</button>
</div>

<script>
  const amountInput = document.getElementById('amount');
  const currencySelect = document.getElementById('currency');
  const cardNumberInput = document.getElementById('card-number');
  const expiryInput = document.getElementById('expiry');
  const cvvInput = document.getElementById('cvv');
  const payButton = document.getElementById('pay-button');
  const visaIcon = document.getElementById('visa-icon');
  const mastercardIcon = document.getElementById('mastercard-icon');
  const amexIcon = document.getElementById('amex-icon');

  const currencySymbols = {
      USD: '$',
      EUR: '€',
      GBP: '£'
  };

  function resetCardIcons() {
      visaIcon.classList.remove('active');
      mastercardIcon.classList.remove('active');
      amexIcon.classList.remove('active');
  }

  amountInput.addEventListener('input', (e) => {
      let value = e.target.value.replace(/[^0-9.]/g, '');
      const parts = value.split('.');
      if (parts.length > 1) {
          value = parts[0] + '.' + parts[1].slice(0, 2);
      }
      e.target.value = value;
      validateAmount();
      updatePayButton();
      validateForm();
  });

  currencySelect.addEventListener('change', () => {
      validateCurrency();
      updatePayButton();
      validateForm();
  });

  cardNumberInput.addEventListener('input', (e) => {
      let value = e.target.value.replace(/\D/g, '');
      value = value.replace(/(\d{4})(?=\d)/g, '$1 ').trim();
      e.target.value = value;
      validateCardNumber();
      detectCardType(value);
      validateForm();
  });

  expiryInput.addEventListener('input', (e) => {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length >= 3) {
          value = value.slice(0, 2) + '/' + value.slice(2);
      }
      e.target.value = value;
      validateExpiry();
      validateForm();
  });

  cvvInput.addEventListener('input', (e) => {
      e.target.value = e.target.value.replace(/\D/g, '');
      validateCVV();
      validateForm();
  });

  function detectCardType(number) {
      const cleaned = number.replace(/\D/g, '');
      const visa = /^4/;
      const mastercard = /^5[1-5]/;
      const amex = /^3[47]/;

      resetCardIcons();
      if (visa.test(cleaned)) {
          visaIcon.classList.add('active');
      } else if (mastercard.test(cleaned)) {
          mastercardIcon.classList.add('active');
      } else if (amex.test(cleaned)) {
          amexIcon.classList.add('active');
      }
  }

  function validateAmount() {
      const value = parseFloat(amountInput.value);
      const error = document.getElementById('amount-error');
      const isValid = !isNaN(value) && value > 0;
      error.style.display = isValid ? 'none' : 'block';
      return isValid;
  }

  function validateCurrency() {
      const value = currencySelect.value;
      const error = document.getElementById('currency-error');
      const isValid = value !== '';
      error.style.display = isValid ? 'none' : 'block';
      return isValid;
  }

  function validateCardNumber() {
      const value = cardNumberInput.value.replace(/\D/g, '');
      const error = document.getElementById('card-number-error');
      const isValid = value.length >= 15 && value.length <= 16;
      error.style.display = isValid ? 'none' : 'block';
      return isValid;
  }

  function validateExpiry() {
      const value = expiryInput.value;
      const error = document.getElementById('expiry-error');
      const regex = /^(0[1-9]|1[0-2])\/([0-9]{2})$/;
      if (!regex.test(value)) {
          error.style.display = 'block';
          return false;
      }
      const [month, year] = value.split('/').map(Number);
      const currentYear = new Date().getFullYear() % 100;
      const currentMonth = new Date().getMonth() + 1;
      const isValid = year > currentYear || (year === currentYear && month >= currentMonth);
      error.style.display = isValid ? 'none' : 'block';
      return isValid;
  }

  function validateCVV() {
      const value = cvvInput.value;
      const error = document.getElementById('cvv-error');
      const isValid = value.length === 3 || value.length === 4;
      error.style.display = isValid ? 'none' : 'block';
      return isValid;
  }

  function updatePayButton() {
      const amount = parseFloat(amountInput.value);
      const currency = currencySelect.value;
      if (!isNaN(amount) && amount > 0 && currency) {
          payButton.textContent = `Pay ${currencySymbols[currency]}${amount.toFixed(2)}`;
      } else {
          payButton.textContent = 'Pay';
      }
  }

  function validateForm() {
      const isValid = validateAmount() && validateCurrency() && validateCardNumber() && validateExpiry() && validateCVV();
      payButton.disabled = !isValid;
  }

  payButton.addEventListener('click', () => {
      alert('Payment processed successfully!');
      // Integrate with payment gateway API here
  });
</script>
</body>
</html>